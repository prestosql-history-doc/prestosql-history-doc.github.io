
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>12.122. Release 0.116 &#8212; Presto 310 Documentation</title>
    <link rel="stylesheet" href="../_static/presto.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '310',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="12.123. Release 0.115" href="release-0.115.html" />
    <link rel="prev" title="12.121. Release 0.117" href="release-0.117.html" /> 
  </head>
  <body>
<div class="header">
    <h1 class="heading"><a href="../index.html">
        <span>Presto 310 Documentation</span></a></h1>
    <h2 class="heading"><span>12.122. Release 0.116</span></h2>
</div>
<div class="topnav">
    
<p class="nav">
    <span class="left">
        &laquo; <a href="release-0.117.html">12.121. Release 0.117</a>
    </span>
    <span class="right">
        <a href="release-0.115.html">12.123. Release 0.115</a> &raquo;
    </span>
</p>

</div>
<div class="content">
    
  <div class="section" id="release-0-116">
<h1>12.122. Release 0.116</h1>
<div class="section" id="cast-between-json-and-varchar">
<h2>Cast between JSON and VARCHAR</h2>
<p>Casts of both directions between JSON and VARCHAR have been removed. If you
have such casts in your scripts or views, they will fail with a message when
you move to release 0.116. To get the semantics of the current casts, use:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">JSON_PARSE(x)</span></code> instead of <code class="docutils literal"><span class="pre">CAST(x</span> <span class="pre">as</span> <span class="pre">JSON)</span></code></li>
<li><code class="docutils literal"><span class="pre">JSON_FORMAT(x)</span></code> instead of <code class="docutils literal"><span class="pre">CAST(x</span> <span class="pre">as</span> <span class="pre">VARCHAR)</span></code></li>
</ul>
<p>In a future release, we intend to reintroduce casts between JSON and VARCHAR
along with other casts involving JSON. The semantics of the new JSON and
VARCHAR cast will be consistent with the other casts being introduced. But it
will be different from the semantics in 0.115 and before. When that comes,
cast between JSON and VARCHAR in old scripts and views will produce unexpected
result.</p>
</div>
<div class="section" id="cluster-memory-manager-improvements">
<h2>Cluster Memory Manager Improvements</h2>
<p>The cluster memory manager now has a low memory killer. If the cluster runs low
on memory, the killer will kill queries to improve throughput. It can be enabled
with the <code class="docutils literal"><span class="pre">query.low-memory-killer.enabled</span></code> config flag, and the delay between
when the cluster runs low on memory and when the killer will be invoked can be
configured with the <code class="docutils literal"><span class="pre">query.low-memory-killer.delay</span></code> option.</p>
</div>
<div class="section" id="general-changes">
<h2>General Changes</h2>
<ul class="simple">
<li>Add <a class="reference internal" href="../functions/aggregate.html#multimap_agg" title="multimap_agg"><code class="xref py py-func docutils literal"><span class="pre">multimap_agg()</span></code></a> function.</li>
<li>Add <a class="reference internal" href="../functions/aggregate.html#checksum" title="checksum"><code class="xref py py-func docutils literal"><span class="pre">checksum()</span></code></a> function.</li>
<li>Add <a class="reference internal" href="../functions/aggregate.html#max" title="max"><code class="xref py py-func docutils literal"><span class="pre">max()</span></code></a> and <a class="reference internal" href="../functions/aggregate.html#min" title="min"><code class="xref py py-func docutils literal"><span class="pre">min()</span></code></a> that takes a second argument and produces
<code class="docutils literal"><span class="pre">n</span></code> largest or <code class="docutils literal"><span class="pre">n</span></code> smallest values.</li>
<li>Add <code class="docutils literal"><span class="pre">query_max_run_time</span></code> session property and <code class="docutils literal"><span class="pre">query.max-run-time</span></code>
config. Queries are failed after the specified duration.</li>
<li>Removed <code class="docutils literal"><span class="pre">experimental.cluster-memory-manager-enabled</span></code> config. The cluster
memory manager is now always enabled.</li>
<li>Removed <code class="docutils literal"><span class="pre">task.max-memory</span></code> config.</li>
<li><code class="docutils literal"><span class="pre">optimizer.optimize-hash-generation</span></code> and <code class="docutils literal"><span class="pre">distributed-joins-enabled</span></code> are
both enabled by default now.</li>
<li>Add optimization for <code class="docutils literal"><span class="pre">IF</span></code> on a constant condition.</li>
</ul>
</div>
</div>


</div>
<div class="bottomnav">
    
<p class="nav">
    <span class="left">
        &laquo; <a href="release-0.117.html">12.121. Release 0.117</a>
    </span>
    <span class="right">
        <a href="release-0.115.html">12.123. Release 0.115</a> &raquo;
    </span>
</p>

</div>

    <div class="footer" role="contentinfo">
    </div>
  </body>
</html>